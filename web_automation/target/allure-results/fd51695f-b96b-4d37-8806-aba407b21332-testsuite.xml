<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:test-suite start="1537448451921" stop="1537448556312" version="1.5.2" xmlns:ns2="urn:model.allure.qatools.yandex.ru">
    <name>Transferring chat</name>
    <description type="text">
Verification of basic transfer chat functionality</description>
    <test-cases>
        <test-case start="1537448451921" stop="1537448556312" status="broken">
            <name>Verify if agent is able to transfer chat via "Transfer chat" button</name>
            <title>Verify if agent is able to transfer chat via "Transfer chat" button</title>
            <description type="text"></description>
            <failure>
                <message>NoSuchElementException: No value present</message>
                <stack-trace>java.util.NoSuchElementException: No value present
                    at java.util.Optional.get(Optional.java:135)
                    at agentpages.uielements.LeftMenuWithChats.getTargetChat(LeftMenuWithChats.java:29)
                    at openNewFromSocialConversationRequest(LeftMenuWithChats.java:34)
                    at steps.DefaultAgentSteps.acceptUserConversation(DefaultAgentSteps.java:230)
                    at âœ½.When First Agent click on new conversation(TransferingChat.feature:15)
                </stack-trace>
            </failure>
            <steps>
                <step start="1537448455879" stop="1537448481547" status="passed">
                    <name>Given I login as agent of General Bank Demo</name>
                    <title>Given I login as agent of General Bank Demo</title>
                </step>
                <step start="1537448481547" stop="1537448483611" status="passed">
                    <name>Given User select General Bank Demo tenant</name>
                    <title>Given User select General Bank Demo tenant</title>
                </step>
                <step start="1537448483611" stop="1537448487527" status="passed">
                    <name>And Click chat icon</name>
                    <title>And Click chat icon</title>
                </step>
                <step start="1537448487528" stop="1537448488291" status="passed">
                    <name>When User enter connect to agent into widget input field</name>
                    <title>When User enter connect to agent into widget input field</title>
                </step>
                <step start="1537448488291" stop="1537448493392" status="passed">
                    <name>Then Agent has new conversation request</name>
                    <title>Then Agent has new conversation request</title>
                </step>
                <step start="1537448493393" stop="1537448515875" status="passed">
                    <name>Given I login as second agent of General Bank Demo</name>
                    <title>Given I login as second agent of General Bank Demo</title>
                </step>
                <step start="1537448515875" stop="1537448531809" status="broken">
                    <name>When First Agent click on new conversation</name>
                    <title>When First Agent click on new conversation</title>
                </step>
                <step start="1537448531809" stop="1537448531809" status="canceled">
                    <name>And Agent transfers chat</name>
                    <title>And Agent transfers chat</title>
                </step>
                <step start="1537448531809" stop="1537448531809" status="canceled">
                    <name>Then Second agent receives incoming transfer with "Please take care of this one" note from the first agent</name>
                    <title>Then Second agent receives incoming transfer with "Please take care of this one" note from the first agent</title>
                </step>
                <step start="1537448531810" stop="1537448531810" status="canceled">
                    <name>And Second agent can see transferring agent name, user name and following user's message: 'connect to agent'</name>
                    <title>And Second agent can see transferring agent name, user name and following user's message: 'connect to agent'</title>
                </step>
                <step start="1537448531810" stop="1537448531810" status="canceled">
                    <name>When Second agent click "Accept transfer" button</name>
                    <title>When Second agent click "Accept transfer" button</title>
                </step>
                <step start="1537448531810" stop="1537448531810" status="canceled">
                    <name>Then Second agent has new conversation request</name>
                    <title>Then Second agent has new conversation request</title>
                </step>
                <step start="1537448531810" stop="1537448531810" status="canceled">
                    <name>And Agent should not see from user chat in agent desk</name>
                    <title>And Agent should not see from user chat in agent desk</title>
                </step>
                <step start="1537448531810" stop="1537448531810" status="canceled">
                    <name>When Second agent click on new conversation</name>
                    <title>When Second agent click on new conversation</title>
                </step>
                <step start="1537448531810" stop="1537448531810" status="canceled">
                    <name>Then Conversation area becomes active with connect to agent user's message in it for second agent</name>
                    <title>Then Conversation area becomes active with connect to agent user's message in it for second agent</title>
                </step>
                <step start="1537448531810" stop="1537448531810" status="canceled">
                    <name>When Second agent responds with hello to User</name>
                    <title>When Second agent responds with hello to User</title>
                </step>
                <step start="1537448531810" stop="1537448531810" status="canceled">
                    <name>Then User have to receive 'hello' text response for his 'connect to agent' input</name>
                    <title>Then User have to receive 'hello' text response for his 'connect to agent' input</title>
                </step>
            </steps>
            <attachments/>
            <labels>
                <label name="story" value="Verify if agent is able to transfer chat via &quot;Transfer chat&quot; button"/>
                <label name="feature" value="Transferring chat"/>
                <label name="host" value="unassigned"/>
                <label name="thread" value="5587@unassigned.main(1)"/>
                <label name="framework" value="CucumberJVM"/>
            </labels>
        </test-case>
    </test-cases>
    <labels>
        <label name="feature" value="Transferring chat"/>
        <label name="language" value="JAVA"/>
    </labels>
</ns2:test-suite>
